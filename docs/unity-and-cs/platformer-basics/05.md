---
layout: post
title: Scripting
parent: Platformer Basics
grand_parent: Unity and C#
nav_order: "05"
---

<iframe width="560" height="315" src="https://www.youtube.com/embed/FtGSduSrysk" title="Final game" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

## Scripting

### Start() and Update()

```csharp
using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class PlayerController : MonoBehaviour
{
    // Start is called before the first frame update
    void Start()
    {

    }

    // Update is called once per frame
    void Update()
    {

    }
}
```

### Variables and FixedUpdate

```csharp
public class PlayerController : MonoBehaviour
{
    private bool isGrounded;
    private Rigidbody2D rb;

    // Public variables are set in the Unity Inspector
    public float xSpeed;
    public float jumpStrength;

    // Initialize all private variables in Start
    void Start()
    {
        isGrounded = false;
        rb = GetComponent<Rigidbody2D>();
    }

    // FixedUpdate is used for physics (Rigidbody2D)
    void FixedUpdate()
    {

    }
}
```

### Add horizontal movement

```csharp
void FixedUpdate()
{
    float xHat = new Vector2(Input.GetAxis("Horizontal"), 0).normalized.x;
    float vx = xHat * xSpeed;
    rb.AddForce(transform.right * vx);
}
```

### Add vertical movement

```csharp
void FixedUpdate()
{
    float xHat = new Vector2(Input.GetAxis("Horizontal"), 0).normalized.x;
    float vx = xHat * xSpeed;
    rb.AddForce(transform.right * vx);

    float yHat = new Vector2(0, Input.GetAxis("Vertical")).normalized.y;
    if (isGrounded && yHat == 1) {
        float vy = yHat * jumpStrength;
        isGrounded = false;
        rb.AddForce(transform.up * vy);
    }
}

void OnCollisionEnter2D(Collision2D collision)
{
    // You can get rid of the Debug.Log when you want
    Debug.Log(collision.gameObject.tag);
    isGrounded = collision.gameObject.tag == "Ground";
}
```

### Final Code

```csharp
using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class PlayerController : MonoBehaviour
{
    private bool isGrounded;
    private Rigidbody2D rb;

    // Public variables are set in the Unity Inspector
    public float xSpeed;
    public float jumpStrength;

    // Initialize all private variables in Start
    void Start()
    {
        isGrounded = false;
        rb = GetComponent<Rigidbody2D>();
    }

    // FixedUpdate is used for physics (RigidBody)
    void FixedUpdate()
    {
        float xHat = new Vector2(Input.GetAxis("Horizontal"), 0).normalized.x;
        float vx = xHat * xSpeed;
        rb.AddForce(transform.right * vx);

        float yHat = new Vector2(0, Input.GetAxis("Vertical")).normalized.y;
        if (isGrounded && yHat == 1) {
            float vy = yHat * jumpStrength;
            isGrounded = false;
            rb.AddForce(transform.up * vy);
        }
    }

    void OnCollisionEnter2D(Collision2D collision)
    {
        isGrounded = collision.gameObject.tag == "Ground";
    }
}
```
